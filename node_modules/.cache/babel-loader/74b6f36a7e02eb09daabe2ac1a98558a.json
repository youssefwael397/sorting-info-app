{"ast":null,"code":"import _slicedToArray from\"D:/back/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import classes from \"./Admin.module.css\";\nimport axios from\"axios\";import{ToastContainer,toast}from\"react-toastify\";import{useEffect,useState}from\"react\";// import { env } from \"../env\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Admin(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),arr=_useState4[0],setArr=_useState4[1];var apiUrl='http://storing-info-app.epizy.com/user/index.php';var formData=new FormData();formData.append(\"_method\",\"delete\");var deleteUser=function deleteUser(id){axios.post(\"\".concat(apiUrl,\"/\").concat(id),formData).then(function(){return toast.warn(\"user deleted successfully\");}).then(function(){setArr(arr.filter(function(user){return user.Social_ID!=id;}));});};var api=function api(){axios.get(apiUrl).then(function(res){console.log(res.data);setArr(res.data);});};useEffect(function(){api();},[]);var inputHandler=function inputHandler(event){setSearchTerm(event.target.value);};////content management////\nvar content=\"\";if(arr==null||arr.length===0){content=/*#__PURE__*/_jsx(\"h1\",{children:\"There is no users \"});}else{content=/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"SocialId\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Image url\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:searchTerm.trim().length===0?arr.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:arr.indexOf(user)+1}),/*#__PURE__*/_jsx(\"td\",{children:user.Name}),/*#__PURE__*/_jsx(\"td\",{children:user.Social_ID}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{width:\"150\",src:\"data:image/jpeg;base64,\".concat(user.Photo)})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteUser(user.Social_ID);},className:\"btn btn-danger\",children:\"delete\"})})]},arr.indexOf(user)+1);}):arr.filter(function(user){return user.Name.toUpperCase().startsWith(searchTerm.toUpperCase());}).map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:arr.indexOf(user)+1}),/*#__PURE__*/_jsx(\"td\",{children:user.Name}),/*#__PURE__*/_jsx(\"td\",{children:user.Social_ID}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{width:\"150\",src:\"data:image/jpeg;base64,\".concat(user.Photo)})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteUser(user.Social_ID);},className:\"btn btn-danger\",children:\"delete\"})})]},arr.indexOf(user)+1);})})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container w-60 w-sm-100 mt-3 text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",className:\"form-control\",onChange:inputHandler}),/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-left\"}),content]});}export default Admin;","map":{"version":3,"sources":["D:/back/front/src/components/Admin.js"],"names":["axios","ToastContainer","toast","useEffect","useState","Admin","searchTerm","setSearchTerm","arr","setArr","apiUrl","formData","FormData","append","deleteUser","id","post","then","warn","filter","user","Social_ID","api","get","res","console","log","data","inputHandler","event","target","value","content","length","trim","map","indexOf","Name","Photo","toUpperCase","startsWith"],"mappings":"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","sourcesContent":["// import classes from \"./Admin.module.css\";\r\nimport axios from \"axios\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n// import { env } from \"../env\";\r\nfunction Admin() {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  const [arr, setArr] = useState(null);\r\n  const apiUrl = 'http://storing-info-app.epizy.com/user/index.php';\r\n  const formData = new FormData();\r\n  formData.append(\"_method\", \"delete\");\r\n\r\n  const deleteUser = (id) => {\r\n    axios\r\n      .post(\r\n        `${apiUrl}/${id}`, formData\r\n      )\r\n      .then(() => toast.warn(\"user deleted successfully\"))\r\n      .then(() => {\r\n        setArr(arr.filter(user => user.Social_ID != id))\r\n      });\r\n  };\r\n\r\n  const api = () => {\r\n    axios.get(apiUrl).then((res) => {\r\n      console.log(res.data);\r\n\r\n      setArr(res.data);\r\n    })\r\n  }\r\n  useEffect(() => {\r\n    api()\r\n  }, []);\r\n\r\n  const inputHandler = (event) => {\r\n    setSearchTerm(event.target.value)\r\n  }\r\n\r\n\r\n\r\n  ////content management////\r\n  var content = \"\";\r\n  if (arr == null || arr.length === 0) {\r\n    content = <h1>There is no users </h1>;\r\n  } else {\r\n    content = (\r\n      <div className=\"table-responsive\">\r\n        <table className=\"table table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">#</th>\r\n              <th scope=\"col\">Name</th>\r\n              <th scope=\"col\">SocialId</th>\r\n              <th scope=\"col\">Image url</th>\r\n              <th scope=\"col\">Delete</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {searchTerm.trim().length === 0 ? arr.map((user) => (\r\n              <tr key={arr.indexOf(user) + 1}>\r\n                <td>{arr.indexOf(user) + 1}</td>\r\n                <td>{user.Name}</td>\r\n                <td>{user.Social_ID}</td>\r\n                <td>\r\n                  <a href={\"#\"}><img width=\"150\" src={`data:image/jpeg;base64,${user.Photo}`}></img></a>\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    onClick={() => deleteUser(user.Social_ID)}\r\n                    className=\"btn btn-danger\"\r\n                  >\r\n                    delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            )) : arr.filter(user => user.Name.toUpperCase().startsWith(searchTerm.toUpperCase())).map((user) => (\r\n              <tr key={arr.indexOf(user) + 1}>\r\n                <td>{arr.indexOf(user) + 1}</td>\r\n                <td>{user.Name}</td>\r\n                <td>{user.Social_ID}</td>\r\n                <td>\r\n                  <a href={\"#\"}><img width=\"150\" src={`data:image/jpeg;base64,${user.Photo}`}></img></a>\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    onClick={() => deleteUser(user.Social_ID)}\r\n                    className=\"btn btn-danger\"\r\n                  >\r\n                    delete\r\n                  </button>\r\n                </td>\r\n              </tr>))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n\r\n    <div className=\"container w-60 w-sm-100 mt-3 text-center\">\r\n      <input type=\"text\" placeholder=\"Search...\" className=\"form-control\"\r\n        onChange={inputHandler} />\r\n      <ToastContainer position=\"bottom-left\" />\r\n      {content}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Admin;\r\n"]},"metadata":{},"sourceType":"module"}